<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SmartWealth Navigator - Enhanced Financial Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f5f7fa;
      color: #333;
    }
    .header-font {
      font-family: 'EB Garamond', serif;
    }
    .dashboard-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s;
    }
    .dashboard-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }
    .stat-value {
      font-size: 1.5rem;
      font-weight: 600;
    }
    .stat-label {
      font-size: 0.875rem;
      color: #6b7280;
    }
    .progress-bar {
      height: 8px;
      border-radius: 4px;
      background-color: #e5e7eb;
    }
    .progress-value {
      height: 8px;
      border-radius: 4px;
    }
  </style>
</head>
<body class="min-h-screen">
  <pre id="embeddedPsrData" style="display: none;">/* MAKE_COM_JSON_PLACEHOLDER */</pre>
  
  <!-- Loading spinner -->
  <div id="loadingSpinner" class="fixed top-0 left-0 w-full h-full flex items-center justify-center bg-white bg-opacity-90 z-50">
    <div class="text-center">
      <svg class="animate-spin h-10 w-10 text-blue-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      <p class="text-gray-700">Loading your financial dashboard...</p>
    </div>
  </div>
  
  <!-- Error Message -->
  <div id="errorMessage" class="hidden fixed top-0 left-0 w-full h-full flex items-center justify-center bg-white bg-opacity-90 z-50">
    <div class="bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg max-w-md">
      <h3 class="font-bold text-lg mb-2">Error Loading Dashboard</h3>
      <p id="errorText">Unable to load financial data. Please try again later.</p>
    </div>
  </div>

  <!-- Main Dashboard -->
  <div id="mainContent" class="container mx-auto px-4 py-8 max-w-7xl">
    <!-- Dashboard Header -->
    <header class="mb-8">
      <h1 id="dashboard-title" class="header-font text-3xl md:text-4xl font-bold text-gray-800 mb-2">SmartWealth Navigator</h1>
      <p id="dashboard-subtitle" class="text-gray-600">Financial insights for <span id="userName">you</span></p>
    </header>

    <!-- Financial Overview -->
    <section class="mb-10">
      <h2 class="header-font text-2xl font-bold text-gray-800 mb-4">Financial Overview</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Income Card -->
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Monthly Income</h3>
          <div class="flex justify-between items-center mb-4">
            <span class="stat-label">Total Income</span>
            <span id="totalIncome" class="stat-value text-green-600">$0</span>
          </div>
          <div id="incomeBreakdown" class="space-y-2">
            <!-- Income breakdown will be inserted here -->
          </div>
        </div>
        
        <!-- Expenses Card -->
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Monthly Expenses</h3>
          <div class="flex justify-between items-center mb-4">
            <span class="stat-label">Total Expenses</span>
            <span id="totalExpenses" class="stat-value text-red-600">$0</span>
          </div>
          <div class="mb-2">
            <div id="expensesChart" class="h-40"></div>
          </div>
        </div>
        
        <!-- Cash Flow Card -->
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Monthly Cash Flow</h3>
          <div class="flex justify-between items-center mb-2">
            <span class="stat-label">Net Cash Flow</span>
            <span id="netCashFlow" class="stat-value">$0</span>
          </div>
          <div class="progress-bar mb-6">
            <div id="cashFlowProgress" class="progress-value" style="width: 0%"></div>
          </div>
          <div class="text-sm text-gray-600">
            <div id="cashFlowMessage"></div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Savings & Assets -->
    <section class="mb-10">
      <h2 class="header-font text-2xl font-bold text-gray-800 mb-4">Savings & Assets</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Emergency Fund</h3>
          <div class="mb-2">
            <div class="flex justify-between items-center mb-1">
              <span class="stat-label">Current</span>
              <span id="emergencyFund" class="font-medium">$0</span>
            </div>
            <div class="progress-bar">
              <div id="emergencyProgress" class="progress-value bg-blue-500" style="width: 0%"></div>
            </div>
          </div>
          <p id="emergencyMessage" class="text-sm text-gray-600 mt-2"></p>
        </div>
        
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Current Savings</h3>
          <div class="flex justify-between items-center mb-4">
            <span class="stat-label">Total Savings</span>
            <span id="currentSavings" class="stat-value text-blue-600">$0</span>
          </div>
          <div id="savingsChart" class="h-40"></div>
        </div>
        
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Retirement Fund</h3>
          <div class="flex justify-between items-center mb-4">
            <span class="stat-label">Current Retirement Savings</span>
            <span id="retirementFund" class="stat-value text-purple-600">$0</span>
          </div>
          <p id="retirementMessage" class="text-sm text-gray-600"></p>
        </div>
      </div>
    </section>
    
    <!-- Debt Overview -->
    <section class="mb-10">
      <h2 class="header-font text-2xl font-bold text-gray-800 mb-4">Debt Overview</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Current Debts</h3>
          <div class="flex justify-between items-center mb-4">
            <span class="stat-label">Total Debt</span>
            <span id="totalDebt" class="stat-value text-red-600">$0</span>
          </div>
          <div id="debtBreakdown" class="space-y-3">
            <!-- Debt breakdown will be inserted here -->
          </div>
        </div>
        
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Debt-to-Income Ratio</h3>
          <div class="flex justify-between items-center mb-2">
            <span class="stat-label">Current Ratio</span>
            <span id="debtToIncomeRatio" class="stat-value">0%</span>
          </div>
          <div class="progress-bar mb-6">
            <div id="debtRatioProgress" class="progress-value" style="width: 0%"></div>
          </div>
          <p id="debtRatioMessage" class="text-sm text-gray-600"></p>
        </div>
      </div>
    </section>
    
    <!-- Financial Analysis -->
    <section class="mb-10">
      <h2 class="header-font text-2xl font-bold text-gray-800 mb-4">Financial Analysis</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Analysis</h3>
          <div id="analysisContent" class="text-gray-700 prose max-w-none">
            <!-- Analysis content will be inserted here -->
          </div>
        </div>
        
        <div class="dashboard-card p-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">Recommendations</h3>
          <div id="recommendationsContent" class="text-gray-700 prose max-w-none">
            <!-- Recommendations content will be inserted here -->
          </div>
        </div>
      </div>
    </section>
    
    <!-- Progress Tracking -->
    <section class="mb-8">
      <h2 class="header-font text-2xl font-bold text-gray-800 mb-4">Your Progress</h2>
      <div class="dashboard-card p-6">
        <div id="progressContent" class="text-gray-700 prose max-w-none">
          <!-- Progress content will be inserted here -->
        </div>
      </div>
    </section>

    <footer class="text-center text-gray-500 text-sm py-4">
      <p>SmartWealth Navigator Â© 2025 | Data updated: <span id="updateDate">Today</span></p>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Set current date
      const today = new Date();
      document.getElementById('updateDate').textContent = today.toLocaleDateString('en-US', {
        year: 'numeric', month: 'long', day: 'numeric'
      });
      
      // Initialize dashboard with data
      initializeDashboard();
    });

    // Format currency values
    function formatCurrency(value) {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(value);
    }
    
    // Format percentage values
    function formatPercentage(value) {
      return new Intl.NumberFormat('en-US', {
        style: 'percent',
        minimumFractionDigits: 1,
        maximumFractionDigits: 1
      }).format(value / 100);
    }
    
    // Initialize dashboard data
    function initializeDashboard() {
      const params = new URLSearchParams(window.location.search);
      const dataElement = document.getElementById('embeddedPsrData');
      let dataLoaded = false;
      let dashboardData = {};

      try {
        // Try loading from URL parameters first
        if (params.has('userName') || params.has('mainJobIncome')) {
          dashboardData = {
            userInput: {
              personalInfo: {
                userName: params.get('userName') || 'User',
                age: Number(params.get('age') || 30)
              },
              income: {
                mainJobIncome: Number(params.get('mainJobIncome') || 0),
                secondJob: Number(params.get('secondJobIncome') || 0),
                otherIncome: Number(params.get('otherIncome') || 0)
              },
              savings: {
                emergency: Number(params.get('emergencySavings') || 0),
                savings: Number(params.get('currentSavings') || 0),
                retirement: Number(params.get('retirementFund') || 0)
              },
              expenses: {
                housing: Number(params.get('housing') || 0),
                transportation: Number(params.get('transportation') || 0),
                utilities: Number(params.get('utilities') || 0),
                groceriesEssentials: Number(params.get('groceries-essentials') || 0),
                insurance: Number(params.get('insurance') || 0),
                medical: Number(params.get('medical') || 0),
                care: Number(params.get('care') || 0),
                subscriptions: Number(params.get('subscriptions') || 0),
                taxes: Number(params.get('taxes') || 0)
              },
              debts: [
                {
                  type: "Credit Card",
                  balance: Number(params.get('creditCardDebt') || 0),
                  interestRate: 22.5,
                  minPayment: 50
                },
                {
                  type: "Bank Loans",
                  balance: Number(params.get('bankLoans') || 0),
                  interestRate: 6.5,
                  minPayment: 100
                }
              ],
              financials: {
                financialTools: params.get('financialTools') || '',
                challenges: params.get('challenges') || '',
                upcomingPurchase: params.get('upcomingPurchases') || ''
              }
            },
            aiOutput: {
              analysis: params.get('aiAnalysis') || '',
              recommendations: params.get('recommendations') || '',
              userProgress: params.get('userProgressHistory') || ''
            }
          };
          dataLoaded = true;
          console.log("URL parameters loaded successfully");
        }
        // Try loading from embedded JSON if URL parameters aren't available
        else if (dataElement && dataElement.textContent.trim() !== '/* MAKE_COM_JSON_PLACEHOLDER */') {
          const embeddedData = JSON.parse(dataElement.textContent);
          dashboardData = embeddedData;
          dataLoaded = true;
          console.log("Embedded data loaded successfully");
        }

        if (dataLoaded) {
          renderDashboard(dashboardData);
        } else {
          throw new Error("No data available for the dashboard");
        }
      } catch (err) {
        console.error("Dashboard initialization error:", err);
        document.getElementById("errorText").innerText = `Unable to load financial data: ${err.message}`;
        document.getElementById("errorMessage").classList.remove("hidden");
        document.getElementById("loadingSpinner").classList.add("hidden");
      }
    }
    
    // Render the dashboard with the loaded data
    function renderDashboard(data) {
      try {
        // Set user name
        const userName = data.userInput.personalInfo.userName || 'User';
        document.getElementById('userName').textContent = userName;
        document.getElementById('dashboard-title').textContent = `SmartWealth Navigator`;
        
        // Calculate total income
        const income = data.userInput.income;
        const totalIncome = (income.mainJobIncome || 0) + (income.secondJob || 0) + (income.otherIncome || 0);
        document.getElementById('totalIncome').textContent = formatCurrency(totalIncome);
        
        // Render income breakdown
        const incomeBreakdownElement = document.getElementById('incomeBreakdown');
        incomeBreakdownElement.innerHTML = '';
        
        if (income.mainJobIncome > 0) {
          incomeBreakdownElement.innerHTML += `
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Main Job</span>
              <span class="font-medium">${formatCurrency(income.mainJobIncome)}</span>
            </div>
          `;
        }
        
        if (income.secondJob > 0) {
          incomeBreakdownElement.innerHTML += `
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Second Job</span>
              <span class="font-medium">${formatCurrency(income.secondJob)}</span>
            </div>
          `;
        }
        
        if (income.otherIncome > 0) {
          incomeBreakdownElement.innerHTML += `
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Other Income</span>
              <span class="font-medium">${formatCurrency(income.otherIncome)}</span>
            </div>
          `;
        }
        
        // Calculate total expenses
        const expenses = data.userInput.expenses;
        const totalExpenses = (expenses.housing || 0) + (expenses.transportation || 0) + 
                              (expenses.utilities || 0) + (expenses.groceriesEssentials || 0) + 
                              (expenses.insurance || 0) + (expenses.medical || 0) + 
                              (expenses.care || 0) + (expenses.subscriptions || 0) + 
                              (expenses.taxes || 0);
        document.getElementById('totalExpenses').textContent = formatCurrency(totalExpenses);
        
        // Calculate and display net cash flow
        const netCashFlow = totalIncome - totalExpenses;
        const netCashFlowElement = document.getElementById('netCashFlow');
        const cashFlowProgressElement = document.getElementById('cashFlowProgress');
        const cashFlowMessageElement = document.getElementById('cashFlowMessage');
        
        netCashFlowElement.textContent = formatCurrency(netCashFlow);
        
        if (netCashFlow >= 0) {
          netCashFlowElement.classList.add('text-green-600');
          cashFlowProgressElement.classList.add('bg-green-500');
          const savingsRate = Math.min((netCashFlow / totalIncome) * 100, 100);
          cashFlowProgressElement.style.width = `${savingsRate}%`;
          
          if (savingsRate > 20) {
            cashFlowMessageElement.textContent = `Great job! You're saving ${Math.round(savingsRate)}% of your income.`;
            cashFlowMessageElement.classList.add('text-green-600');
          } else if (savingsRate > 10) {
            cashFlowMessageElement.textContent = `You're saving ${Math.round(savingsRate)}% of your income, which is good.`;
            cashFlowMessageElement.classList.add('text-green-600');
          } else {
            cashFlowMessageElement.textContent = `You're saving ${Math.round(savingsRate)}% of your income. Consider increasing this if possible.`;
            cashFlowMessageElement.classList.add('text-yellow-600');
          }
        } else {
          netCashFlowElement.classList.add('text-red-600');
          cashFlowProgressElement.classList.add('bg-red-500');
          const deficitRate = Math.min((Math.abs(netCashFlow) / totalIncome) * 100, 100);
          cashFlowProgressElement.style.width = `${deficitRate}%`;
          
          cashFlowMessageElement.textContent = `You're spending more than you earn. Consider reducing expenses or finding additional income sources.`;
          cashFlowMessageElement.classList.add('text-red-600');
        }
        
        // Render expenses chart
        renderExpensesChart(expenses);
        
        // Render savings information
        const savings = data.userInput.savings;
        document.getElementById('emergencyFund').textContent = formatCurrency(savings.emergency || 0);
        document.getElementById('currentSavings').textContent = formatCurrency(savings.savings || 0);
        document.getElementById('retirementFund').textContent = formatCurrency(savings.retirement || 0);
        
        // Calculate emergency fund progress (typically 3-6 months of expenses)
        const emergencyTarget = totalExpenses * 6;
        const emergencyProgress = Math.min((savings.emergency / emergencyTarget) * 100, 100);
        document.getElementById('emergencyProgress').style.width = `${emergencyProgress}%`;
        
        const emergencyMessageElement = document.getElementById('emergencyMessage');
        if (emergencyProgress >= 100) {
          emergencyMessageElement.textContent = `Excellent! Your emergency fund covers 6+ months of expenses.`;
          emergencyMessageElement.classList.add('text-green-600');
        } else if (emergencyProgress >= 50) {
          emergencyMessageElement.textContent = `Good progress! Your emergency fund covers ${Math.round((savings.emergency / totalExpenses))} months of expenses.`;
          emergencyMessageElement.classList.add('text-blue-600');
        } else {
          emergencyMessageElement.textContent = `Your emergency fund covers ${Math.round((savings.emergency / totalExpenses) * 10) / 10} months of expenses. Aim for 3-6 months.`;
          emergencyMessageElement.classList.add('text-yellow-600');
        }
        
        // Calculate and display retirement estimate based on age
        const age = data.userInput.personalInfo.age || 30;
        const retirementMessageElement = document.getElementById('retirementMessage');
        
        // Simple retirement calculation: At your age, you should have X times your annual income saved
        const annualIncome = totalIncome * 12;
        let targetMultiplier;
        
        if (age < 30) targetMultiplier = 1;
        else if (age < 40) targetMultiplier = 3;
        else if (age < 50) targetMultiplier = 6;
        else if (age < 60) targetMultiplier = 8;
        else targetMultiplier = 10;
        
        const retirementTarget = annualIncome * targetMultiplier;
        const retirementProgress = (savings.retirement / retirementTarget) * 100;
        
        if (retirementProgress >= 100) {
          retirementMessageElement.textContent = `You're on track or ahead of your retirement savings goal for your age.`;
          retirementMessageElement.classList.add('text-green-600');
        } else if (retirementProgress >= 70) {
          retirementMessageElement.textContent = `You're making good progress towards your retirement goal. Target: ${formatCurrency(retirementTarget)}`;
          retirementMessageElement.classList.add('text-blue-600');
        } else {
          retirementMessageElement.textContent = `Consider increasing retirement savings. At age ${age}, aim for about ${formatCurrency(retirementTarget)}.`;
          retirementMessageElement.classList.add('text-yellow-600');
        }
        
        // Render savings breakdown chart
        renderSavingsChart(savings);
        
        // Calculate and display debt information
        const debts = data.userInput.debts;
        const totalDebt = debts.reduce((sum, debt) => sum + debt.balance, 0);
        document.getElementById('totalDebt').textContent = formatCurrency(totalDebt);
        
        // Render debt breakdown
        const debtBreakdownElement = document.getElementById('debtBreakdown');
        debtBreakdownElement.innerHTML = '';
        
        if (debts.length > 0) {
          debts.forEach(debt => {
            if (debt.balance > 0) {
              debtBreakdownElement.innerHTML += `
                <div>
                  <div class="flex justify-between items-center mb-1">
                    <span class="text-sm text-gray-600">${debt.type} (${debt.interestRate}%)</span>
                    <span class="font-medium">${formatCurrency(debt.balance)}</span>
                  </div>
                  <div class="progress-bar">
                    <div class="progress-value bg-red-500" style="width: ${(debt.balance / totalDebt) * 100}%"></div>
                  </div>
                </div>
              `;
            }
          });
        } else {
          debtBreakdownElement.innerHTML = '<p class="text-green-600">No debts reported. Great job!</p>';
        }
        
        // Calculate and display debt-to-income ratio
        const annualDebtPayments = debts.reduce((sum, debt) => sum + (debt.minPayment * 12), 0);
        const debtToIncomeRatio = (annualDebtPayments / (totalIncome * 12)) * 100;
        document.getElementById('debtToIncomeRatio').textContent = `${debtToIncomeRatio.toFixed(1)}%`;
        
        const debtRatioProgressElement = document.getElementById('debtRatioProgress');
        const debtRatioMessageElement = document.getElementById('debtRatioMessage');
        
        // Use different colors based on ratio severity
        if (debtToIncomeRatio <= 10) {
          debtRatioProgressElement.classList.add('bg-green-500');
          debtRatioMessageElement.textContent = 'Your debt-to-income ratio is excellent.';
          debtRatioMessageElement.classList.add('text-green-600');
        } else if (debtToIncomeRatio <= 20) {
          debtRatioProgressElement.classList.add('bg-blue-500');
          debtRatioMessageElement.textContent = 'Your debt-to-income ratio is good.';
          debtRatioMessageElement.classList.add('text-blue-600');
        } else if (debtToIncomeRatio <= 36) {
          debtRatioProgressElement.classList.add('bg-yellow-500');
          debtRatioMessageElement.textContent = 'Your debt-to-income ratio is manageable but could be improved.';
          debtRatioMessageElement.classList.add('text-yellow-600');
        } else {
          debtRatioProgressElement.classList.add('bg-red-500');
          debtRatioMessageElement.textContent = 'Your debt-to-income ratio is high. Consider debt reduction strategies.';
          debtRatioMessageElement.classList.add('text-red-600');
        }
        
        debtRatioProgressElement.style.width = `${Math.min(debtToIncomeRatio * 2.5, 100)}%`;
        
        // Render analysis and recommendations
        const aiOutput = data.aiOutput;
        
        if (aiOutput.analysis) {
          document.getElementById('analysisContent').innerHTML = aiOutput.analysis.replace(/\n/g, '<br>');
        } else {
          document.getElementById('analysisContent').innerHTML = `
            <p>Based on your financial data:</p>
            <ul class="list-disc pl-5 mt-2 space-y-1">
              <li>Your monthly income is ${formatCurrency(totalIncome)}</li>
              <li>Your monthly expenses total ${formatCurrency(totalExpenses)}</li>
              <li>Your monthly cash flow is ${formatCurrency(netCashFlow)}</li>
              <li>Your total debt is ${formatCurrency(totalDebt)}</li>
              <li>Your debt-to-income ratio is ${debtToIncomeRatio.toFixed(1)}%</li>
            </ul>
          `;
        }
        
        if (aiOutput.recommendations) {
          document.getElementById('recommendationsContent').innerHTML = aiOutput.recommendations.replace(/\n/g, '<br>');
        } else {
          document.getElementById('recommendationsContent').innerHTML = generateDefaultRecommendations(
            totalIncome, totalExpenses, netCashFlow, savings, totalDebt, debtToIncomeRatio, age
          );
        }
        
        if (aiOutput.userProgress) {
          document.getElementById('progressContent').innerHTML = aiOutput.userProgress.replace(/\n/g, '<br>');
        } else {
          document.getElementById('progressContent').innerHTML = `
            <p>This is your financial baseline. Return regularly to update your information and track your progress!</p>
            <p class="mt-2">Key areas to focus on:</p>
            <ul class="list-disc pl-5 mt-2 space-y-1">
              <li>${netCashFlow >= 0 ? 'Maintain positive cash flow' : 'Work towards positive cash flow'}</li>
              <li>${emergencyProgress >= 100 ? 'Maintain emergency fund' : 'Build emergency fund to 3-6 months of expenses'}</li>
              <li>${totalDebt > 0 ? 'Continue debt reduction strategy' : 'Stay debt-free'}</li>
              <li>Consistently contribute to retirement savings</li>
            </ul>
          `;
        }
        
        // Hide loading spinner and show content
        document.getElementById('loadingSpinner').style.display = 'none';
        
      } catch (err) {
        console.error("Error rendering dashboard:", err);
        document.getElementById("errorText").innerText = `Error rendering dashboard: ${err.message}`;
        document.getElementById("errorMessage").classList.remove("hidden");
        document.getElementById("loadingSpinner").classList.add("hidden");
      }
    }
